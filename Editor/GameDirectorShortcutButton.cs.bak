using UnityEngine;
using UnityEditor;
#if UNITY_6000_3_OR_NEWER
using UnityEditor.Toolbars;
#elif TOOLBAREXTENDER_1_4_2
using UnityToolbarExtender;
#endif

namespace GameDashboard.Editor
{
#if !UNITY_6000_3_OR_NEWER && TOOLBAREXTENDER_1_4_2
    [InitializeOnLoad]
#endif
    public class GameDirectorShortcutButton : Editor
    {
#if UNITY_6000_3_OR_NEWER
        [MainToolbarElement("4rtisans/Game Director", defaultDockPosition = MainToolbarDockPosition.Middle)]
        public static MainToolbarElement ToolbarButton()
        {
            var icon = EditorGUIUtility.IconContent("Settings").image as Texture2D;
            var content = new MainToolbarContent(icon, "Game Director");
            return new MainToolbarButton(content, () => { GameDirectorWindow.ShowWindow(); });
        }
#elif TOOLBAREXTENDER_1_4_2
        private static class ToolbarStyles
        {
            public static readonly GUIStyle commandButtonStyle;

            static ToolbarStyles()
            {
                commandButtonStyle = new GUIStyle("Command")
                {
                    imagePosition = ImagePosition.ImageOnly
                };
            }
        }

        static GameDirectorShortcutButton()
        {
            ToolbarExtender.LeftToolbarGUI.Add(OnToolbarGUI);
        }

        private static void OnToolbarGUI()
        {
            GUILayout.FlexibleSpace();

            if (GUILayout.Button(new GUIContent(EditorGUIUtility.IconContent("Settings").image, "Game Director"), ToolbarStyles.commandButtonStyle))
            {
                GameDirectorWindow.ShowWindow();
            }
        }
#endif
    }
}
